(function(e,t,n,i){"use strict";var s=s||{};s.funcs={};s.vars={onloaded:false,$window:e(t),$document:e(n),is_rtl:e("body").hasClass("rtl"),code_themes:[]};s.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\-|\])/g,"\\$1")},name_nested_replace:function(t,n){var i=[];var a=new RegExp("("+s.helper.preg_quote(n)+")\\[(\\d+)\\]","g");t.find(":radio").each(function(){if(this.checked||this.orginal_checked){this.orginal_checked=true}});t.each(function(t){e(this).find(":input").each(function(){this.name=this.name.replace(a,n+"["+t+"]");if(this.orginal_checked){this.checked=true}})})},debounce:function(e,t,n){var i;return function(){var s=this,a=arguments;var c=function(){i=null;if(!n){e.apply(s,a)}};var r=n&&!i;clearTimeout(i);i=setTimeout(c,t);if(r){e.apply(s,a)}}},get_cookie:function(e){var t,i,s=n.cookie,a=e+"=";if(!s){return}i=s.indexOf("; "+a);if(i===-1){i=s.indexOf(a);if(i!==0){return null}}else{i+=2}t=s.indexOf(";",i);if(t===-1){t=s.length}return decodeURIComponent(s.substring(i+a.length,t))},set_cookie:function(e,t,i,s,a,c){var r=new Date;if(typeof i==="object"&&i.toGMTString){i=i.toGMTString()}else if(parseInt(i,10)){r.setTime(r.getTime()+parseInt(i,10)*1e3);i=r.toGMTString()}else{i=""}n.cookie=e+"="+encodeURIComponent(t)+(i?"; expires="+i:"")+(s?"; path="+s:"")+(a?"; domain="+a:"")+(c?"; secure":"")},remove_cookie:function(e,t,n,i){s.helper.set_cookie(e,"",-1e3,t,n,i)}};e.fn.csf_clone=function(){var t=e.fn.clone.apply(this,arguments),n=this.find("select").add(this.filter("select")),i=t.find("select").add(t.filter("select"));for(var s=0;s<n.length;++s){for(var a=0;a<n[s].options.length;++a){if(n[s].options[a].selected===true){i[s].options[a].selected=true}}}this.find(":radio").each(function(){this.orginal_checked=this.checked});return t};e.fn.csf_expand_all=function(){return this.each(function(){e(this).on("click",function(t){t.preventDefault();e(".csf-wrapper").toggleClass("csf-show-all");e(".csf-section").csf_reload_script();e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})};e.fn.csf_nav_options=function(){return this.each(function(){var n=e(this),s=n.find("a"),a=n.closest(".csf").find(".csf-section-id"),c;e(t).on("hashchange",function(){var n=t.location.hash.match(new RegExp("tab=([^&]*)"));var r=n?n[1]:s.first().attr("href").replace("#tab=","");var f=e("#csf-tab-link-"+r);if(f.length>0){f.closest(".csf-tab-depth-0").addClass("csf-tab-active").siblings().removeClass("csf-tab-active");s.removeClass("csf-section-active");f.addClass("csf-section-active");if(c!==i){c.hide()}var o=e("#csf-section-"+r);o.css({display:"block"});o.csf_reload_script();a.val(r);c=o}}).trigger("hashchange")})};e.fn.csf_nav_metabox=function(){return this.each(function(){var t=e(this),n=t.find("a"),a=t.data("unique"),c=e("#post_ID").val()||"global",r,f;n.on("click",function(t){t.preventDefault();var n=e(this),o=n.data("section");if(f!==i){f.removeClass("csf-section-active")}if(r!==i){r.hide()}n.addClass("csf-section-active");var l=e("#csf-section-"+o);l.css({display:"block"});l.csf_reload_script();s.helper.set_cookie("csf-last-metabox-tab-"+c+"-"+a,o);r=l;f=n});var o=s.helper.get_cookie("csf-last-metabox-tab-"+c+"-"+a);if(o){t.find('a[data-section="'+o+'"]').trigger("click")}else{n.first("a").trigger("click")}})};e.fn.csf_page_templates=function(){if(this.length){e(n).on("change",".editor-page-attributes__template select, #page_template",function(){var t=e(this).val()||"default";e(".csf-page-templates").removeClass("csf-show").addClass("csf-hide");e(".csf-page-"+t.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("csf-hide").addClass("csf-show")})}};e.fn.csf_post_formats=function(){if(this.length){e(n).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var t=e(this).val()||"default";t=t==="0"?"default":t;e(".csf-post-formats").removeClass("csf-show").addClass("csf-hide");e(".csf-post-format-"+t).removeClass("csf-hide").addClass("csf-show")})}};e.fn.csf_search=function(){return this.each(function(){var t=e(this),n=t.find("input");n.on("change keyup",function(){var t=e(this).val(),n=e(".csf-wrapper"),i=n.find(".csf-section"),s=i.find("> .csf-field:not(.hidden)"),a=s.find("> .csf-title, .csf-search-tags");if(t.length>3){s.addClass("csf-hidden");n.addClass("csf-search-all");a.each(function(){var n=e(this);if(n.text().match(new RegExp(".*?"+t+".*?","i"))){var i=n.closest(".csf-field");i.removeClass("csf-hidden");i.parent().csf_reload_script()}})}else{s.removeClass("csf-hidden");n.removeClass("csf-search-all")}})})};e.fn.csf_sticky=function(){return this.each(function(){var i=e(this),s=e(t),a=i.find(".csf-header-inner"),c=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),r=32,f=0,o=0,l=false,d=function(){var e=i.offset().top,s=Math.max(r,e-f),o=Math.max(n.documentElement.clientWidth,t.innerWidth||0);if(s<=r&&o>782){a.css({width:i.outerWidth()-c});i.css({height:i.outerHeight()}).addClass("csf-sticky")}else{a.removeAttr("style");i.removeAttr("style").removeClass("csf-sticky")}},h=function(){if(!l){requestAnimationFrame(function(){d();l=false})}l=true},u=function(){f=s.scrollTop();h()};s.on("scroll resize",u);u()})};e.fn.csf_dependency=function(){return this.each(function(){var t=e(this),n=e.csf_deps.createRuleset();var i=[];t.children("[data-controller]").each(function(){var t=e(this),s=t.data("controller").split("|"),a=t.data("condition").split("|"),c=t.data("value").toString().split("|"),r=n;e.each(s,function(e,n){var s=c[e]||"",f=a[e]||a[0];r=r.createRule('[data-depend-id="'+n+'"]',f,s);r.include(t);i.push(n)})});e.csf_deps.enable(t,n,i)})};e.fn.csf_field_accordion=function(){return this.each(function(){var t=e(this).find(".csf-accordion-title");t.on("click",function(){var t=e(this),n=t.find(".csf-accordion-icon"),i=t.next();if(n.hasClass("fa-angle-right")){n.removeClass("fa-angle-right").addClass("fa-angle-down")}else{n.removeClass("fa-angle-down").addClass("fa-angle-right")}if(!i.data("opened")){i.csf_reload_script();i.data("opened",true)}i.toggleClass("csf-accordion-open")})})};e.fn.csf_field_backup=function(){return this.each(function(){if(t.wp.customize===i){return}var n=e(this),s=e("body"),a=n.find(".csf-import"),c=n.find(".csf-reset"),r=false;c.on("click",function(e){e.preventDefault();if(!r){s.addClass("csf-opacity");t.wp.ajax.post("csf-reset",{unique:c.data("unique"),nonce:c.data("nonce")}).done(function(e){t.location.reload(true)}).fail(function(e){alert(e.error);r=false;s.removeClass("csf-opacity")})}r=true});a.on("click",function(e){e.preventDefault();if(!r){s.addClass("csf-opacity");t.wp.ajax.post("csf-import",{unique:a.data("unique"),nonce:a.data("nonce"),import_data:n.find(".csf-import-data").val()}).done(function(e){t.location.reload(true)}).fail(function(e){alert(e.error);r=false;s.removeClass("csf-opacity")})}r=true})})};e.fn.csf_field_background=function(){return this.each(function(){e(this).find(".csf--media").csf_reload_script()})};e.fn.csf_field_code_editor=function(){return this.each(function(){if(typeof CodeMirror!=="function"){return}var t=e(this),n=t.find("textarea"),i=t.find(".CodeMirror"),a=n.data("editor");if(i.length){i.remove()}var c=setInterval(function(){if(t.is(":visible")){var i=CodeMirror.fromTextArea(n[0],a);if(a.theme!=="default"&&s.vars.code_themes.indexOf(a.theme)===-1){var r=e("<link>");e("#csf-codemirror-css").after(r);r.attr({rel:"stylesheet",id:"csf-codemirror-"+a.theme+"-css",href:a.cdnURL+"/theme/"+a.theme+".min.css",type:"text/css",media:"all"});s.vars.code_themes.push(a.theme)}CodeMirror.modeURL=a.cdnURL+"/mode/%N/%N.min.js";CodeMirror.autoLoadMode(i,a.mode);i.on("change",function(e,t){n.val(i.getValue()).trigger("change")});clearInterval(c)}})})};e.fn.csf_field_date=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".csf-date-settings").data("settings"),s='<div class="csf-datepicker-wrapper"></div>',a;var c={showAnim:"",beforeShow:function(t,n){e(n.dpDiv).addClass("csf-datepicker-wrapper")},onClose:function(t,n){e(n.dpDiv).removeClass("csf-datepicker-wrapper")}};i=e.extend({},i,c);if(n.length===2){i=e.extend({},i,{onSelect:function(t){var s=e(this),a=n.first(),c=n.first().attr("id")===e(this).attr("id")?"minDate":"maxDate",r=e.datepicker.parseDate(i.dateFormat,t);n.not(this).datepicker("option",c,r)}})}n.each(function(){var t=e(this);if(t.hasClass("hasDatepicker")){t.removeAttr("id").removeClass("hasDatepicker")}t.datepicker(i)})})};e.fn.csf_field_fieldset=function(){return this.each(function(){e(this).find(".csf-fieldset-content").csf_reload_script()})};e.fn.csf_field_gallery=function(){return this.each(function(){var n=e(this),i=n.find(".csf-edit-gallery"),s=n.find(".csf-clear-gallery"),a=n.find("ul"),c=n.find("input"),r=n.find("img"),f;n.on("click",".csf-button, .csf-edit-gallery",function(n){var r=e(this),o=c.val(),l=r.hasClass("csf-edit-gallery")?"edit":"add",d=l==="add"&&!o.length?"gallery":"gallery-edit";n.preventDefault();if(typeof t.wp==="undefined"||!t.wp.media||!t.wp.media.gallery){return}if(d==="gallery"){f=t.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:true});f.open()}else{f=t.wp.media.gallery.edit('[gallery ids="'+o+'"]');if(l==="add"){f.setState("gallery-library")}}f.on("update",function(e){a.empty();var t=e.models.map(function(e){var t=e.toJSON();var n=typeof t.sizes.thumbnail!=="undefined"?t.sizes.thumbnail.url:t.url;a.append('<li><img src="'+n+'"></li>');return t.id});c.val(t.join(",")).trigger("change");s.removeClass("hidden");i.removeClass("hidden")})});s.on("click",function(e){e.preventDefault();a.empty();c.val("").trigger("change");s.addClass("hidden");i.addClass("hidden")})})};e.fn.csf_field_group=function(){return this.each(function(){var t=e(this),n=t.children(".csf-fieldset"),i=n.children(".csf-cloneable-wrapper"),a=n.children(".csf-cloneable-hidden"),c=n.children(".csf-cloneable-max"),r=n.children(".csf-cloneable-min"),f=i.data("field-id"),o=i.data("unique-id"),l=Boolean(Number(i.data("title-number"))),d=parseInt(i.data("max")),h=parseInt(i.data("min"));if(i.hasClass("ui-accordion")){i.find(".ui-accordion-header-icon").remove()}var u=function(t){t.find(".csf-cloneable-title-number").each(function(t){e(this).html(e(this).closest(".csf-cloneable-item").index()+1+".")})};i.accordion({header:"> .csf-cloneable-item > .csf-cloneable-title",collapsible:true,active:false,animate:false,heightStyle:"content",icons:{header:"csf-cloneable-header-icon fa fa-angle-right",activeHeader:"csf-cloneable-header-icon fa fa-angle-down"},activate:function(e,t){var n=t.newPanel;var i=t.newHeader;if(n.length&&!n.data("opened")){var s=n.children();var a=s.first().find(":input").first();var c=i.find(".csf-cloneable-value");a.on("keyup",function(e){c.text(a.val())});n.csf_reload_script();n.data("opened",true);n.data("retry",false)}else if(n.data("retry")){n.csf_reload_script_retry();n.data("retry",false)}}});i.sortable({axis:"y",handle:".csf-cloneable-title,.csf-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){i.accordion({active:false});i.sortable("refreshPositions");t.item.children(".csf-cloneable-content").data("retry",true)},update:function(e,t){s.helper.name_nested_replace(i.children(".csf-cloneable-item"),f);i.csf_customizer_refresh();if(l){u(i)}}});n.children(".csf-cloneable-add").on("click",function(t){t.preventDefault();var n=i.children(".csf-cloneable-item").length;r.hide();if(d&&n+1>d){c.show();return}var s=o+f+"["+n+"]";var h=a.csf_clone(true);h.removeClass("csf-cloneable-hidden");h.find(":input").each(function(){this.name=s+this.name.replace(this.name.startsWith("_nonce")?"_nonce":o,"")});h.find(".csf-data-wrapper").each(function(){e(this).attr("data-unique-id",s)});i.append(h);i.accordion("refresh");i.accordion({active:n});i.csf_customizer_refresh();i.csf_customizer_listen({closest:true});if(l){u(i)}});var p=function(t){t.preventDefault();var n=i.children(".csf-cloneable-item").length;r.hide();if(d&&n+1>d){c.show();return}var a=e(this),o=a.parent().parent(),h=o.children(".csf-cloneable-helper").csf_clone(true),p=o.children(".csf-cloneable-title").csf_clone(),v=o.children(".csf-cloneable-content").csf_clone(),g=new RegExp("("+s.helper.preg_quote(f)+")\\[(\\d+)\\]","g");v.find(".csf-data-wrapper").each(function(){var t=e(this);t.attr("data-unique-id",t.attr("data-unique-id").replace(g,f+"["+(o.index()+1)+"]"))});var _=e('<div class="csf-cloneable-item" />');_.append(h);_.append(p);_.append(v);i.children().eq(o.index()).after(_);s.helper.name_nested_replace(i.children(".csf-cloneable-item"),f);i.accordion("refresh");i.csf_customizer_refresh();i.csf_customizer_listen({closest:true});if(l){u(i)}};i.children(".csf-cloneable-item").children(".csf-cloneable-helper").on("click",".csf-cloneable-clone",p);n.children(".csf-cloneable-hidden").children(".csf-cloneable-helper").on("click",".csf-cloneable-clone",p);var v=function(t){t.preventDefault();var n=i.children(".csf-cloneable-item").length;c.hide();r.hide();if(h&&n-1<h){r.show();return}e(this).closest(".csf-cloneable-item").remove();s.helper.name_nested_replace(i.children(".csf-cloneable-item"),f);i.csf_customizer_refresh();if(l){u(i)}};i.children(".csf-cloneable-item").children(".csf-cloneable-helper").on("click",".csf-cloneable-remove",v);n.children(".csf-cloneable-hidden").children(".csf-cloneable-helper").on("click",".csf-cloneable-remove",v)})};e.fn.csf_field_icon=function(){return this.each(function(){var n=e(this);n.on("click",".csf-icon-add",function(i){i.preventDefault();var a=e(this);var c=e("#csf-modal-icon");c.show();s.vars.$icon_target=n;if(!s.vars.icon_modal_loaded){c.find(".csf-modal-loading").show();t.wp.ajax.post("csf-get-icons",{nonce:a.data("nonce")}).done(function(t){c.find(".csf-modal-loading").hide();s.vars.icon_modal_loaded=true;var n=c.find(".csf-modal-load").html(t.content);n.on("click","a",function(t){t.preventDefault();var n=e(this).data("csf-icon");s.vars.$icon_target.find("i").removeAttr("class").addClass(n);s.vars.$icon_target.find("input").val(n).trigger("change");s.vars.$icon_target.find(".csf-icon-preview").removeClass("hidden");s.vars.$icon_target.find(".csf-icon-remove").removeClass("hidden");c.hide()});c.on("change keyup",".csf-icon-search",function(){var t=e(this).val(),i=n.find("a");i.each(function(){var n=e(this);if(n.data("csf-icon").search(new RegExp(t,"i"))<0){n.hide()}else{n.show()}})});c.on("click",".csf-modal-close, .csf-modal-overlay",function(){c.hide()})})}});n.on("click",".csf-icon-remove",function(t){t.preventDefault();n.find(".csf-icon-preview").addClass("hidden");n.find("input").val("").trigger("change");e(this).addClass("hidden")})})};e.fn.csf_field_media=function(){return this.each(function(){var n=e(this),i=n.find(".csf--button"),s=n.find(".csf--remove"),a;i.on("click",function(e){e.preventDefault();if(typeof t.wp==="undefined"||!t.wp.media||!t.wp.media.gallery){return}if(a){a.open();return}a=t.wp.media({library:{type:i.data("library").split(",")}});a.on("select",function(){var e;var t=a.state().get("selection").first().attributes;var c=i.data("preview-size")||"thumbnail";n.find(".csf--url").val(t.url);n.find(".csf--id").val(t.id);n.find(".csf--width").val(t.width);n.find(".csf--height").val(t.height);n.find(".csf--alt").val(t.alt);n.find(".csf--title").val(t.title);n.find(".csf--description").val(t.description);if(typeof t.sizes!=="undefined"&&typeof t.sizes.thumbnail!=="undefined"&&c==="thumbnail"){e=t.sizes.thumbnail.url}else if(typeof t.sizes!=="undefined"&&typeof t.sizes.full!=="undefined"){e=t.sizes.full.url}else{e=t.icon}s.removeClass("hidden");n.find(".csf--preview").removeClass("hidden");n.find(".csf--src").attr("src",e);n.find(".csf--thumbnail").val(e).trigger("change")});a.open()});s.on("click",function(e){e.preventDefault();s.addClass("hidden");n.find(".csf--preview").addClass("hidden");n.find("input").val("");n.find(".csf--thumbnail").trigger("change")})})};e.fn.csf_field_repeater=function(){return this.each(function(){var t=e(this),n=t.children(".csf-fieldset"),i=n.children(".csf-repeater-wrapper"),a=n.children(".csf-repeater-hidden"),c=n.children(".csf-repeater-max"),r=n.children(".csf-repeater-min"),f=i.data("field-id"),o=i.data("unique-id"),l=parseInt(i.data("max")),d=parseInt(i.data("min"));i.children(".csf-repeater-item").children(".csf-repeater-content").csf_reload_script();i.sortable({axis:"y",handle:".csf-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){s.helper.name_nested_replace(i.children(".csf-repeater-item"),f);i.csf_customizer_refresh();t.item.csf_reload_script_retry()}});n.children(".csf-repeater-add").on("click",function(t){t.preventDefault();var n=i.children(".csf-repeater-item").length;r.hide();if(l&&n+1>l){c.show();return}var s=o+f+"["+n+"]";var d=a.csf_clone(true);d.removeClass("csf-repeater-hidden");d.find(":input").each(function(){this.name=s+this.name.replace(this.name.startsWith("_nonce")?"_nonce":o,"")});d.find(".csf-data-wrapper").each(function(){e(this).attr("data-unique-id",s)});i.append(d);d.children(".csf-repeater-content").csf_reload_script();i.csf_customizer_refresh();i.csf_customizer_listen({closest:true})});var h=function(t){t.preventDefault();var n=i.children(".csf-repeater-item").length;r.hide();if(l&&n+1>l){c.show();return}var a=e(this),o=a.parent().parent().parent(),d=o.children(".csf-repeater-content").csf_clone(),h=o.children(".csf-repeater-helper").csf_clone(true),u=new RegExp("("+s.helper.preg_quote(f)+")\\[(\\d+)\\]","g");d.find(".csf-data-wrapper").each(function(){var t=e(this);t.attr("data-unique-id",t.attr("data-unique-id").replace(u,f+"["+(o.index()+1)+"]"))});var p=e('<div class="csf-repeater-item" />');p.append(d);p.append(h);i.children().eq(o.index()).after(p);p.children(".csf-repeater-content").csf_reload_script();s.helper.name_nested_replace(i.children(".csf-repeater-item"),f);i.csf_customizer_refresh();i.csf_customizer_listen({closest:true})};i.children(".csf-repeater-item").children(".csf-repeater-helper").on("click",".csf-repeater-clone",h);n.children(".csf-repeater-hidden").children(".csf-repeater-helper").on("click",".csf-repeater-clone",h);var u=function(t){t.preventDefault();var n=i.children(".csf-repeater-item").length;c.hide();r.hide();if(d&&n-1<d){r.show();return}e(this).closest(".csf-repeater-item").remove();s.helper.name_nested_replace(i.children(".csf-repeater-item"),f);i.csf_customizer_refresh()};i.children(".csf-repeater-item").children(".csf-repeater-helper").on("click",".csf-repeater-remove",u);n.children(".csf-repeater-hidden").children(".csf-repeater-helper").on("click",".csf-repeater-remove",u)})};e.fn.csf_field_slider=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".csf-slider-ui"),s=n.data(),a=n.val()||0;if(i.hasClass("ui-slider")){i.empty()}i.slider({range:"min",value:a,min:s.min,max:s.max,step:s.step,slide:function(e,t){n.val(t.value).trigger("change")}});n.keyup(function(){i.slider("value",n.val())})})};e.fn.csf_field_sortable=function(){return this.each(function(){var t=e(this).find(".csf--sortable");t.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,n){t.csf_customizer_refresh()}});t.find(".csf--sortable-content").csf_reload_script()})};e.fn.csf_field_sorter=function(){return this.each(function(){var t=e(this),n=t.find(".csf-enabled"),i=t.find(".csf-disabled"),s=i.length?i:false;n.sortable({connectWith:s,placeholder:"ui-sortable-placeholder",update:function(e,n){var i=n.item.find("input");if(n.item.parent().hasClass("csf-enabled")){i.attr("name",i.attr("name").replace("disabled","enabled"))}else{i.attr("name",i.attr("name").replace("enabled","disabled"))}t.csf_customizer_refresh()}});if(s){s.sortable({connectWith:n,placeholder:"ui-sortable-placeholder",update:function(e,n){t.csf_customizer_refresh()}})}})};e.fn.csf_field_spinner=function(){return this.each(function(){var t=e(this),n=t.find("input"),i=t.find(".ui-spinner-button");if(i.length){i.remove()}n.spinner({max:n.data("max")||100,min:n.data("min")||0,step:n.data("step")||1,spin:function(e,t){n.val(t.value).trigger("change")}})})};e.fn.csf_field_switcher=function(){return this.each(function(){var t=e(this).find(".csf--switcher");t.on("click",function(){var e=0;var n=t.find("input");if(t.hasClass("csf--active")){t.removeClass("csf--active")}else{e=1;t.addClass("csf--active")}n.val(e).trigger("change")})})};e.fn.csf_field_tabbed=function(){return this.each(function(){var t=e(this),n=t.find(".csf-tabbed-nav a"),i=t.find(".csf-tabbed-section");i.eq(0).csf_reload_script();n.on("click",function(t){t.preventDefault();var n=e(this),s=n.index(),a=i.eq(s);n.addClass("csf-tabbed-active").siblings().removeClass("csf-tabbed-active");a.csf_reload_script();a.removeClass("hidden").siblings().addClass("hidden")})})};e.fn.csf_field_typography=function(){return this.each(function(){var t=this;var n=e(this);var i=[];var a=csf_typography_json.webfonts;var c=csf_typography_json.googlestyles;var r=csf_typography_json.defaultstyles;t.sanitize_subset=function(e){e=e.replace("-ext"," Extended");e=e.charAt(0).toUpperCase()+e.slice(1);return e};t.sanitize_style=function(e){return c[e]?c[e]:e};t.load_google_font=function(e,t,n){if(e&&typeof WebFont==="object"){t=t?t.replace("normal",""):"";n=n?n.replace("normal",""):"";if(t||n){e=e+":"+t+n}if(i.indexOf(e)===-1){WebFont.load({google:{families:[e]}})}i.push(e)}};t.append_select_options=function(n,i,s,a,c){n.find("option").not(":first").remove();var r="";e.each(i,function(e,n){var i;var f=n;if(c){i=s&&s.indexOf(n)!==-1?" selected":""}else{i=s&&s===n?" selected":""}if(a==="subset"){f=t.sanitize_subset(n)}else if(a==="style"){f=t.sanitize_style(n)}r+='<option value="'+n+'"'+i+">"+f+"</option>"});n.append(r).trigger("csf.change").trigger("chosen:updated")};t.init=function(){var i=[];var c=n.find(".csf--typography");var f=n.find(".csf--type");var o=c.data("unit");var l=c.data("exclude")?c.data("exclude").split(","):[];if(n.find(".csf--chosen").length){var d=n.find("select");d.each(function(){var t=e(this),n=t.parent().find(".chosen-container");if(n.length){n.remove()}t.chosen({allow_single_deselect:true,disable_search_threshold:15,width:"100%"})})}var h=n.find(".csf--font-family");var u=h.val();h.find("option").not(":first-child").remove();var p="";e.each(a,function(t,n){if(l&&l.indexOf(t)!==-1){return}p+='<optgroup label="'+n.label+'">';e.each(n.fonts,function(e,n){n=typeof n==="object"?e:n;var i=n===u?" selected":"";p+='<option value="'+n+'" data-type="'+t+'"'+i+">"+n+"</option>"});p+="</optgroup>"});h.append(p).trigger("chosen:updated");var v=n.find(".csf--block-font-style");if(v.length){var g=n.find(".csf--font-style-select");var _=g.val()?g.val().replace(/normal/g,""):"";g.on("change csf.change",function(e){var t=g.val();if(!t&&i&&i.indexOf("normal")===-1){t=i[0]}var s=t&&t!=="italic"&&t==="normal"?"normal":"";var a=t&&t!=="italic"&&t!=="normal"?t.replace("italic",""):s;var c=t&&t.substr(-6)==="italic"?"italic":"";n.find(".csf--font-weight").val(a);n.find(".csf--font-style").val(c)});var m=n.find(".csf--block-extra-styles");if(m.length){var b=n.find(".csf--extra-styles");var y=b.val()}}var k=n.find(".csf--block-subset");if(k.length){var w=n.find(".csf--subset");var C=w.val();var x=w.data("multiple")||false}var z=n.find(".csf--block-backup-font-family");h.on("change csf.change",function(e){if(k.length){k.addClass("hidden")}if(m.length){m.addClass("hidden")}if(z.length){z.addClass("hidden")}var n=h.find(":selected");var s=n.val();var c=n.data("type");if(c&&s){if((c==="google"||c==="custom")&&z.length){z.removeClass("hidden")}if(v.length){var o=r;if(c==="google"&&a[c].fonts[s][0]){o=a[c].fonts[s][0]}else if(c==="custom"&&a[c].fonts[s]){o=a[c].fonts[s]}i=o;var l=o.indexOf("normal")!==-1?"normal":o[0];var d=_&&o.indexOf(_)!==-1?_:l;t.append_select_options(g,o,d,"style");_=false;v.removeClass("hidden");if(c==="google"&&m.length&&o.length>1){t.append_select_options(b,o,y,"style",true);y=false;m.removeClass("hidden")}}if(c==="google"&&k.length&&a[c].fonts[s][1]){var u=a[c].fonts[s][1];var p=u.length<2&&u[0]!=="latin"?u[0]:"";var D=C&&u.indexOf(C)!==-1?C:p;D=x&&C?C:D;t.append_select_options(w,u,D,"subset",x);C=false;k.removeClass("hidden")}}else{if(k.length){w.find("option").not(":first-child").remove();w.trigger("chosen:updated")}if(v.length){g.find("option").not(":first-child").remove();g.trigger("chosen:updated")}}f.val(c)}).trigger("csf.change");var D=n.find(".csf--block-preview");if(D.length){var q=n.find(".csf--preview");n.on("change",s.helper.debounce(function(e){D.removeClass("hidden");var i=h.val(),s=n.find(".csf--font-weight").val(),a=n.find(".csf--font-style").val(),c=n.find(".csf--font-size").val(),r=n.find(".csf--font-variant").val(),f=n.find(".csf--line-height").val(),l=n.find(".csf--text-align").val(),d=n.find(".csf--text-transform").val(),u=n.find(".csf--text-decoration").val(),p=n.find(".csf--color").val(),v=n.find(".csf--word-spacing").val(),g=n.find(".csf--letter-spacing").val(),_=n.find(".csf--custom-style").val(),m=n.find(".csf--type").val();if(m==="google"){t.load_google_font(i,s,a)}var b={};if(i){b.fontFamily=i}if(s){b.fontWeight=s}if(a){b.fontStyle=a}if(r){b.fontVariant=r}if(c){b.fontSize=c+o}if(f){b.lineHeight=f+o}if(g){b.letterSpacing=g+o}if(v){b.wordSpacing=v+o}if(l){b.textAlign=l}if(d){b.textTransform=d}if(u){b.textDecoration=u}if(p){b.color=p}q.removeAttr("style");if(_){q.attr("style",_)}q.css(b)},100));D.on("click",function(){q.toggleClass("csf--black-background");var e=D.find(".csf--toggle");if(e.hasClass("fa-toggle-off")){e.removeClass("fa-toggle-off").addClass("fa-toggle-on")}else{e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}});if(!D.hasClass("hidden")){n.trigger("change")}}};t.init()})};e.fn.csf_field_upload=function(){return this.each(function(){var n=e(this),i=n.find("input"),s=n.find(".csf--button"),a=n.find(".csf--remove"),c=s.data("library")&&s.data("library").split(","),r;i.on("change",function(e){if(i.val()){a.removeClass("hidden")}else{a.addClass("hidden")}});s.on("click",function(e){e.preventDefault();if(typeof t.wp==="undefined"||!t.wp.media||!t.wp.media.gallery){return}if(r){r.open();return}r=t.wp.media({library:{type:s.data("library").split(",")}});r.on("select",function(){i.val(r.state().get("selection").first().attributes.url).trigger("change")});r.open()});a.on("click",function(e){e.preventDefault();i.val("").trigger("change")})})};e.fn.csf_confirm=function(){return this.each(function(){e(this).on("click",function(n){var i=e(this).data("confirm")||t.csf_vars.i18n.confirm;if(!confirm(i)){n.preventDefault();return false}})})};e.fn.serializeObject=function(){var t={};e.each(this.serializeArray(),function(n,s){var a=s.name,c=s.value;t[a]=t[a]===i?c:e.isArray(t[a])?t[a].concat(c):[t[a],c]});return t};e.fn.csf_save=function(){return this.each(function(){var n=e(this),i=e(".csf-save"),s=e(".csf-options"),a=false,c;n.on("click",function(r){if(!a){var f=n.data("save"),o=n.val();i.attr("value",f);if(n.hasClass("csf-save-ajax")){r.preventDefault();s.addClass("csf-saving");i.prop("disabled",true);t.wp.ajax.post("csf_"+s.data("unique")+"_ajax_save",{data:e("#csf-form").serializeJSONCSF()}).done(function(t){clearTimeout(c);var n=e(".csf-form-success");n.empty().append(t.notice).slideDown("fast",function(){c=setTimeout(function(){n.slideUp("fast")},2e3)});e(".csf-error").remove();var r=e(".csf-form-error");r.empty().hide();if(Object.keys(t.errors).length){var f='<i class="csf-label-error csf-error">!</i>';e.each(t.errors,function(t,n){var i=e('[data-depend-id="'+t+'"]'),s=e("#csf-tab-link-"+(i.closest(".csf-section").index()+1)),a=s.closest(".csf-tab-depth-0");i.closest(".csf-fieldset").append('<p class="csf-text-error csf-error">'+n+"</p>");if(!s.find(".csf-error").length){s.append(f)}if(!a.find(".csf-arrow .csf-error").length){a.find(".csf-arrow").append(f)}console.log(n);r.append("<div>"+f+" "+n+"</div>")});r.show()}s.removeClass("csf-saving");i.prop("disabled",false).attr("value",o);a=false}).fail(function(e){alert(e.error)})}}a=true})})};e.fn.csf_taxonomy=function(){return this.each(function(){var t=e(this),n=t.parents("form");if(n.attr("id")==="addtag"){var i=n.find("#submit"),s=t.find(".csf-field").csf_clone();i.on("click",function(){if(!n.find(".form-required").hasClass("form-invalid")){t.data("inited",false);t.empty();t.html(s);s=s.csf_clone();t.csf_reload_script()}})}})};e.fn.csf_shortcode=function(){var a=this;a.shortcode_parse=function(t,n){var i="";e.each(t,function(t,s){n=n?n:t;i+="["+n;e.each(s,function(e,t){if(e==="content"){i+="]";i+=t;i+="[/"+n+""}else{i+=a.shortcode_tags(e,t)}});i+="]"});return i};a.shortcode_tags=function(t,n){var i="";if(n!==""){if(typeof n==="object"&&!e.isArray(n)){e.each(n,function(e,t){switch(e){case"background-image":t=t.url?t.url:"";break}if(t!==""){i+=" "+e.replace("-","_")+'="'+t.toString()+'"'}})}else{i+=" "+t.replace("-","_")+'="'+n.toString()+'"'}}return i};a.insertAtChars=function(e,t){var n=typeof e[0].name!=="undefined"?e[0]:e;if(n.value.length&&typeof n.selectionStart!=="undefined"){n.focus();return n.value.substring(0,n.selectionStart)+t+n.value.substring(n.selectionEnd,n.value.length)}else{n.focus();return t}};a.send_to_editor=function(t,n){var i;if(typeof tinymce!=="undefined"){i=tinymce.get(n)}if(i&&!i.isHidden()){i.execCommand("mceInsertContent",false,t)}else{var s=e("#"+n);s.val(a.insertAtChars(s,t)).trigger("change")}};return this.each(function(){var c=e(this),r=c.find(".csf-modal-load"),f=c.find(".csf-modal-content"),o=c.find(".csf-modal-insert"),l=c.find(".csf-modal-loading"),d=c.find("select"),h=c.data("modal-id"),u=c.data("nonce"),p,v,g,_,m,b,y,k,w;e(n).on("click",'.csf-shortcode-button[data-modal-id="'+h+'"]',function(t){t.preventDefault();w=e(this);p=w.data("editor-id")||false;v=w.data("target-id")||false;g=w.data("gutenberg-id")||false;c.show();if(c.hasClass("csf-shortcode-single")&&m===i){d.trigger("change")}});d.on("change",function(){var n=e(this);var i=n.find(":selected");_=n.val();m=i.data("shortcode");b=i.data("view")||"normal";y=i.data("group")||m;r.empty();if(_){l.show();t.wp.ajax.post("csf-get-shortcode-"+h,{shortcode_key:_,nonce:u}).done(function(t){l.hide();var n=e(t.content).appendTo(r);o.parent().removeClass("hidden");k=n.find(".csf--repeat-shortcode").csf_clone();n.csf_reload_script();n.find(".csf-fields").csf_reload_script()})}else{o.parent().addClass("hidden")}});o.on("click",function(n){n.preventDefault();var i="";var s=c.find(".csf-field:not(.hidden)").find(":input").serializeObjectCSF();switch(b){case"contents":var r=m?s[m]:s;e.each(r,function(e,t){var n=m?m:e;i+="["+n+"]"+t+"[/"+n+"]"});break;case"group":i+="["+m;e.each(s[m],function(e,t){i+=a.shortcode_tags(e,t)});i+="]";i+=a.shortcode_parse(s[y],y);i+="[/"+m+"]";break;case"repeater":i+=a.shortcode_parse(s[y],y);break;default:i+=a.shortcode_parse(s);break}if(g){var f=t.csf_gutenberg_props.attributes.hasOwnProperty("shortcode")?t.csf_gutenberg_props.attributes.shortcode:"";t.csf_gutenberg_props.setAttributes({shortcode:f+i})}else if(p){a.send_to_editor(i,p)}else{var o=v?e(v):w.parent().find("textarea");o.val(a.insertAtChars(o,i)).trigger("change")}c.hide()});c.on("click",".csf--repeat-button",function(e){e.preventDefault();var t=c.find(".csf--repeatable");var n=k.csf_clone();var i=n.find(".csf-repeat-remove");var a=n.appendTo(t);n.find(".csf-fields").csf_reload_script();s.helper.name_nested_replace(c.find(".csf--repeat-shortcode"),m);i.on("click",function(){n.remove();s.helper.name_nested_replace(c.find(".csf--repeat-shortcode"),m)})});c.on("click",".csf-modal-close, .csf-modal-overlay",function(){c.hide()})})};e.fn.csf_checkbox=function(){return this.each(function(){var t=e(this),n=t.find(".csf--input"),i=t.find(".csf--checkbox");i.on("click",function(){n.val(Number(i.prop("checked"))).trigger("change")})})};e.fn.csf_field_wp_editor=function(){return this.each(function(){if(typeof t.wp.editor==="undefined"||typeof t.tinyMCEPreInit==="undefined"||typeof t.tinyMCEPreInit.mceInit.csf_wp_editor==="undefined"){return}var n=e(this),i=n.find(".csf-wp-editor"),a=n.find("textarea");var c=n.find(".wp-editor-wrap").length||n.find(".mce-container").length;if(c){i.empty();i.append(a);a.css("display","")}var r=s.helper.uid("csf-editor-");a.attr("id",r);var f={tinymce:t.tinyMCEPreInit.mceInit.csf_wp_editor,quicktags:t.tinyMCEPreInit.qtInit.csf_wp_editor};var o=i.data("editor-settings");var l=function(e){e.on("change",s.helper.debounce(function(){e.save();a.trigger("change")},250))};f.tinymce=e.extend({},f.tinymce,{selector:"#"+r,setup:l});if(o.tinymce===false){f.tinymce=false;i.addClass("csf-no-tinymce")}if(o.quicktags===false){f.quicktags=false;i.addClass("csf-no-quicktags")}var d=setInterval(function(){if(n.is(":visible")){t.wp.editor.initialize(r,f);clearInterval(d)}});if(o.media_buttons&&t.csf_media_buttons){var h=i.find(".wp-media-buttons");if(h.length){h.find(".csf-shortcode-button").data("editor-id",r)}else{var u=e(t.csf_media_buttons);u.find(".csf-shortcode-button").data("editor-id",r);i.prepend(u)}}})};e.fn.csf_siblings=function(){return this.each(function(){var t=e(this),n=t.find(".csf--sibling"),i=t.data("multiple")||false;n.on("click",function(){var n=e(this);if(i){if(n.hasClass("csf--active")){n.removeClass("csf--active");n.find("input").prop("checked",false).trigger("change")}else{n.addClass("csf--active");n.find("input").prop("checked",true).trigger("change")}}else{t.find("input").prop("checked",false);n.find("input").prop("checked",true).trigger("change");n.addClass("csf--active").siblings().removeClass("csf--active")}})})};if(typeof Color==="function"){Color.fn.toString=function(){if(this._alpha<1){return this.toCSS("rgba",this._alpha).replace(/\s+/g,"")}var e=parseInt(this._color,10).toString(16);if(this.error){return""}if(e.length<6){for(var t=6-e.length-1;t>=0;t--){e="0"+e}}return"#"+e}}s.funcs.parse_color=function(e){var t=e.replace(/\s+/g,""),n=t.indexOf("rgba")!==-1?parseFloat(t.replace(/^.*,(.+)\)/,"$1")*100):100,i=n<100?true:false;return{value:t,transparent:n,rgba:i}};e.fn.csf_color=function(){return this.each(function(){var n=e(this),i=s.funcs.parse_color(n.val()),a=t.csf_vars.color_palette.length?t.csf_vars.color_palette:true,c;if(n.hasClass("wp-color-picker")){n.closest(".wp-picker-container").after(n).remove()}n.wpColorPicker({palettes:a,change:function(e,t){var i=t.color.toString();c.removeClass("csf--transparent-active");c.find(".csf--transparent-offset").css("background-color",i);n.val(i).trigger("change")},create:function(){c=n.closest(".wp-picker-container");var t=n.data("a8cIris"),a=e('<div class="csf--transparent-wrap">'+'<div class="csf--transparent-slider"></div>'+'<div class="csf--transparent-offset"></div>'+'<div class="csf--transparent-text"></div>'+'<div class="csf--transparent-button button button-small">transparent</div>'+"</div>").appendTo(c.find(".wp-picker-holder")),r=a.find(".csf--transparent-slider"),f=a.find(".csf--transparent-text"),o=a.find(".csf--transparent-offset"),l=a.find(".csf--transparent-button");if(n.val()==="transparent"){c.addClass("csf--transparent-active")}l.on("click",function(){if(n.val()!=="transparent"){n.val("transparent").trigger("change");c.addClass("csf--transparent-active")}else{n.val(t._color.toString()).trigger("change");c.removeClass("csf--transparent-active")}});r.slider({value:i.transparent,step:1,min:0,max:100,slide:function(e,i){var s=parseFloat(i.value/100);t._color._alpha=s;n.wpColorPicker("color",t._color.toString());f.text(s===1||s===0?"":s)},create:function(){var l=parseFloat(i.transparent/100),d=l<1?l:"";f.text(d);o.css("background-color",i.value);c.on("click",".wp-picker-clear",function(){t._color._alpha=1;f.text("");r.slider("option","value",100);c.removeClass("csf--transparent-active");n.trigger("change")});c.on("click",".wp-picker-default",function(){var e=s.funcs.parse_color(n.data("default-color")),i=parseFloat(e.transparent/100),a=i<1?i:"";t._color._alpha=i;f.text(a);r.slider("option","value",e.transparent)});c.on("click",".wp-color-result",function(){a.toggle()});e("body").on("click.wpcolorpicker",function(){a.hide()})}})}})})};e.fn.csf_chosen=function(){return this.each(function(){var t=e(this),n=t.parent().find(".chosen-container"),i=t.attr("multiple")||false,s=i?"100%":"auto",a=e.extend({allow_single_deselect:true,disable_search_threshold:15,width:s},t.data());if(n.length){n.remove()}t.chosen(a)})};e.fn.csf_number=function(){return this.each(function(){e(this).on("keypress",function(e){if(e.keyCode!==0&&e.keyCode!==8&&e.keyCode!==45&&e.keyCode!==46&&(e.keyCode<48||e.keyCode>57)){return false}})})};e.fn.csf_help=function(){return this.each(function(){var t=e(this),n,a;t.on({mouseenter:function(){n=e('<div class="csf-tooltip"></div>').html(t.find(".csf-help-text").html()).appendTo("body");a=s.vars.is_rtl?t.offset().left+24:t.offset().left-n.outerWidth();n.css({top:t.offset().top-(n.outerHeight()/2-14),left:a})},mouseleave:function(){if(n!==i){n.remove()}}})})};e.fn.csf_customizer_refresh=function(){return this.each(function(){var t=e(this),i=t.closest(".csf-customize-complex");if(i.length){var s=i.find(":input"),a=i.data("unique-id"),c=i.data("option-id"),r=s.serializeObjectCSF(),f=!e.isEmptyObject(r)?r[a][c]:"",o=wp.customize.control(a+"["+c+"]");o.setting._value=null;o.setting.set(f)}else{t.find(":input").first().trigger("change")}e(n).trigger("csf-customizer-refresh",t)})};e.fn.csf_customizer_listen=function(n){var a=e.extend({closest:false},n);return this.each(function(){if(t.wp.customize===i){return}var n=a.closest?e(this).closest(".csf-customize-complex"):e(this),c=n.find(":input"),r=n.data("unique-id"),f=n.data("option-id");if(r===i){return}c.on("change keyup",s.helper.debounce(function(){var i=n.find(":input").serializeObjectCSF();if(!e.isEmptyObject(i)&&i[r]){t.wp.customize.control(r+"["+f+"]").setting.set(i[r][f])}},250))})};e(n).on("expanded",".control-section-csf",function(){var t=e(this);if(t.hasClass("open")&&!t.data("inited")){t.csf_dependency();t.find(".csf-customize-field").csf_reload_script({dependency:false});t.find(".csf-customize-complex").csf_customizer_listen();t.data("inited",true)}});s.vars.$window.on("resize csf.resize",s.helper.debounce(function(n){var i=navigator.userAgent.indexOf("AppleWebKit/")>-1?s.vars.$window.width():t.innerWidth;if(i<=782&&!s.vars.onloaded){e(".csf-section").csf_reload_script();s.vars.onloaded=true}},200)).trigger("csf.resize");e.fn.csf_widgets=function(){if(this.length){e(n).on("widget-added widget-updated",function(e,t){t.find(".csf-fields").csf_reload_script()});e(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".csf-fields").csf_reload_script_retry()});e(n).on("click",".widget-top",function(t){e(this).parent().find(".csf-fields").csf_reload_script()})}};e.fn.csf_reload_script_retry=function(){return this.each(function(){var t=e(this);if(t.data("inited")){t.children(".csf-field-wp_editor").csf_field_wp_editor()}})};e.fn.csf_reload_script=function(t){var i=e.extend({dependency:true},t);return this.each(function(){var t=e(this);if(!t.data("inited")){t.children(".csf-field-accordion").csf_field_accordion();t.children(".csf-field-backup").csf_field_backup();t.children(".csf-field-background").csf_field_background();t.children(".csf-field-code_editor").csf_field_code_editor();t.children(".csf-field-date").csf_field_date();t.children(".csf-field-fieldset").csf_field_fieldset();t.children(".csf-field-gallery").csf_field_gallery();t.children(".csf-field-group").csf_field_group();t.children(".csf-field-icon").csf_field_icon();t.children(".csf-field-media").csf_field_media();t.children(".csf-field-repeater").csf_field_repeater();t.children(".csf-field-slider").csf_field_slider();t.children(".csf-field-sortable").csf_field_sortable();t.children(".csf-field-sorter").csf_field_sorter();t.children(".csf-field-spinner").csf_field_spinner();t.children(".csf-field-switcher").csf_field_switcher();t.children(".csf-field-tabbed").csf_field_tabbed();t.children(".csf-field-typography").csf_field_typography();t.children(".csf-field-upload").csf_field_upload();t.children(".csf-field-wp_editor").csf_field_wp_editor();t.children(".csf-field-border").find(".csf-color").csf_color();t.children(".csf-field-background").find(".csf-color").csf_color();t.children(".csf-field-color").find(".csf-color").csf_color();t.children(".csf-field-color_group").find(".csf-color").csf_color();t.children(".csf-field-link_color").find(".csf-color").csf_color();t.children(".csf-field-typography").find(".csf-color").csf_color();t.children(".csf-field-color_pair").find(".csf-color").csf_color();t.children(".csf-field-dimensions").find(".csf-number").csf_number();t.children(".csf-field-slider").find(".csf-number").csf_number();t.children(".csf-field-spacing").find(".csf-number").csf_number();t.children(".csf-field-spinner").find(".csf-number").csf_number();t.children(".csf-field-typography").find(".csf-number").csf_number();t.children(".csf-field-select").find(".csf-chosen").csf_chosen();t.children(".csf-field-checkbox").find(".csf-checkbox").csf_checkbox();t.children(".csf-field-button_set").find(".csf-siblings").csf_siblings();t.children(".csf-field-image_select").find(".csf-siblings").csf_siblings();t.children(".csf-field-palette").find(".csf-siblings").csf_siblings();t.children(".csf-field").find(".csf-help").csf_help();if(i.dependency){t.csf_dependency()}t.data("inited",true);e(n).trigger("csf-reload-script",t)}})};e(n).ready(function(){e(".csf-save").csf_save();e(".csf-confirm").csf_confirm();e(".csf-nav-options").csf_nav_options();e(".csf-nav-metabox").csf_nav_metabox();e(".csf-expand-all").csf_expand_all();e(".csf-search").csf_search();e(".csf-sticky-header").csf_sticky();e(".csf-taxonomy").csf_taxonomy();e(".csf-shortcode").csf_shortcode();e(".csf-page-templates").csf_page_templates();e(".csf-post-formats").csf_post_formats();e(".csf-onload").csf_reload_script();e(".widget").csf_widgets()})})(jQuery,window,document);