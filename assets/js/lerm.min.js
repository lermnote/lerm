document.addEventListener("DOMContentLoaded",function(e){let t=new WOW({boxClass:"loading-animate",animateClass:"animated",offset:0,mobile:true});t.init();let n=document.documentElement;let a=document.body;imageResize=(e=>{let t=document.querySelector(e);if(t){let n=document.querySelectorAll(e);let a=t.querySelector("img").offsetWidth;let o=t.querySelector("img").offsetHeight;n.forEach(e=>{e.querySelector("img").style.width=a+"px";e.querySelector("img").style.height=o+"px"})}});imageResize(".carousel-item");let o=document.querySelectorAll(".dropdown");if(o){o.forEach(e=>{e.onmouseover=(()=>e.querySelector(".dropdown-menu").classList.add("show"));e.onmouseout=(()=>e.querySelector(".dropdown-menu").classList.remove("show"))})}let r=document.body.clientWidth;let i=a.querySelector("#site-header");let l=document.querySelector("#offcanvasMenu");if(r<992){l.style.top=parseFloat(document.defaultView.getComputedStyle(n,null).marginTop)+"px"}document.querySelectorAll("#wp-calendar tbody td a").forEach(e=>{e.classList.add("has-posts")});let s=new LazyLoad({elements_selector:".lazy",threshold:0});if(s){s.update()}if("undefined"!==typeof hljs){document.querySelectorAll("pre code").forEach(e=>{hljs.highlightBlock(e)})}let d=document.getElementById("scroll-up");d.addEventListener("click",e=>{e.preventDefault();animate({timing:e=>n.scrollTop=n.scrollTop*(1-e),draw:c,duration:700})});let c=e=>1-Math.sin(Math.acos(e));const u=document.querySelector(".more-posts");if(typeof u!="undefined"&&u!=null){u.addEventListener("click",e=>{e.preventDefault();u.innerHTML=adminajax.loading;let t=document.querySelector(".ajax-posts");let n=t.dataset.page;let a=t.dataset.max;let o=new URLSearchParams;o.append("action","load_more");o.append("security",adminajax.nonce);o.append("current_page",n);o.append("max_pages",a);fetch(adminajax.url,{method:"POST",body:o}).then(e=>e.json()).then(e=>{if(n==a){throw e}if(e.success==true){let n=parseToDOM(e.data);t.dataset.page++;n.forEach(e=>{document.querySelector(".ajax-posts").appendChild(e)})}u.innerHTML=adminajax.loadmore;u.blur()}).catch(e=>{u.innerHTML=adminajax.noposts;u.blur();u.setAttribute("disabled","true");u.setAttribute("aria-disabled","true")})})}let m=document.querySelector(".like-button");if(typeof m!="undefined"&&m!=null&&m.classList.contains("done")==false){let e=m.dataset.id;let t=new URLSearchParams;t.append("action","lerm_post_like");t.append("security",adminajax.nonce);t.append("post_ID",e);m.addEventListener("click",e=>{e.preventDefault();fetch(adminajax.url,{method:"POST",body:t}).then(e=>e.json()).then(e=>{m.classList.add("done");m.disabled=true;document.querySelector(".count").innerHTML=parseInt(e)}).catch(e=>console.log(e.message))})}let p=document.getElementById("commentform");if(p){p.insertAdjacentHTML("beforeend",'<div id="error" class="text-danger wow"></div>');let e=p.querySelector("#error");let t=p.querySelector('[name="author"]');let n=p.querySelector('[name="email"]');let a=p.querySelector('[name="url"]');let o=p.querySelector('[name="comment"]');e.style.visibility="hidden";e.innerHTML="#";p.addEventListener("submit",r=>{r.preventDefault();e.removeAttribute("style");e.classList.remove("shake");e.classList.remove("fadeOut");e.innerHTML='<strong><i class="fa fa-spinner fa-pulse me-1"></i>正在提交...</strong>';(new WOW).init();if(!adminajax.loggedin){let o={author:t.value,email:n.value,url:a.value};if(!o.author){e.innerHTML="<strong>错误：</strong>请填写姓名";e.classList.add("shake");return}if(!validateEmail(o.email)){e.innerHTML="<strong>错误：</strong>请填写正确的电子邮箱";e.classList.add("shake");return}}if(!o.value){e.innerHTML="<strong>错误：</strong>请输入评论内容";e.classList.add("shake");return}let i=new URLSearchParams(new FormData(p));i.append("action","ajax_comment");i.append("security",adminajax.nonce);fetch(adminajax.url,{method:"POST",body:i}).then(e=>e.json()).then(e=>{let t=parseToDOM(e.data);if(e.success==true&&e.data.length!=0){nodeLi=t[1];p.querySelector('[type="submit"]').setAttribute("disabled","disabled");let e=document.getElementById("respond");if(e.parentNode.classList.contains("comment")){if(null!==e.previousElementSibling){e.previousElementSibling.appendChild(nodeLi)}else{e.parentNode.appendChild(nodeLi)}}else if(document.querySelector(".comment-list")){document.querySelector(".comment-list").insertBefore(nodeLi,document.querySelector(".comment-list").firstChild)}else{let t=document.createElement("div");let n=document.createElement("ol");t.classList="card mb-3";n.classList="comment-list p-0 m-0 list-group list-group-flush";n.appendChild(nodeLi);t.appendChild(n);e.parentNode.appendChild(t)}}else{throw t}}).then(()=>{p.querySelector("#comment").value="";e.innerHTML='<strong><i class="fa fa-ok me-1"></i>提交成功</strong>';let t=setTimeout(function(){p.querySelector('[type="submit"]').removeAttribute("disabled","disabled");e.classList.add("fadeOut");e.style.opacity=0;clearTimeout(t)},3e3)}).catch(t=>{e.innerHTML="<strong>错误：</strong>";t.forEach(t=>{e.appendChild(t);e.classList.add("shake");let n=setTimeout(function(){p.querySelector('[type="submit"]').removeAttribute("disabled","disabled");e.classList.add("fadeOut");e.style.opacity=0;clearTimeout(n)},3e3)})})})}});function isDomReady(e){if(typeof e!=="function"){return}if(document.readyState==="interactive"||document.readyState==="complete"){return e()}document.addEventListener("DOMContentLoaded",e,false)}isDomReady(function(){});const parseToDOM=function(e){let t=document.createElement("div");if(typeof e=="string")t.innerHTML=e;return Array.prototype.slice.call(t.childNodes)};const matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)};function fadeIn(e){e.style.opacity=0;var t=+new Date;var n=function(){e.style.opacity=+e.style.opacity+(new Date-t)/400;t=+new Date;if(+e.style.opacity<1){window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16)}};n()}const validateEmail=function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())};function animate({timing:e,draw:t,duration:n}){let a=performance.now();requestAnimationFrame(function o(r){let i=(r-a)/n;if(i>1)i=1;let l=e(i);t(l);if(i<1){requestAnimationFrame(o)}})}