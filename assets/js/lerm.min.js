(function(){"use strict";let e=$("#archives");let t=$(".month-list",e);let a=$(".month-post-list",e);let n=$(".post-list",e);let o=$(".post-list:first",e);n.hide();o.show();t.first().show();a.css("cursor","s-resize").on("click",function(){$(this).next().slideToggle(400)});var s=function(e,t,a){if(e>n.length){return}if(t=="up"){n.eq(e).slideUp(a,function(){s(e+1,t,a-10<1?0:a-10)})}else{n.eq(e).slideDown(a,function(){s(e+1,t,a-10<1?0:a-10)})}};$("#al_expand_collapse").on("click",function(e){e.preventDefault();if($(this).data("s")){$(this).data("s","");s(0,"up",100)}else{$(this).data("s",1);s(0,"down",100)}});$(document).on("click",'[data-toggle="lightbox"]',function(e){e.preventDefault();return $(this).ekkoLightbox()})})($);document.addEventListener("DOMContentLoaded",function(e){let t=new WOW({boxClass:"loading-animate",animateClass:"animated",offset:0,mobile:true});t.init();let a=document.documentElement;let n=document.body;imageResize=(e=>{let t=document.querySelector(e);if(t){let a=document.querySelectorAll(e);let n=t.querySelector("img").naturalWidth;let o=t.querySelector("img").naturalHeight;let s=t.querySelector("img").offsetWidth;let l=t.querySelector("img").offsetHeight;console.log(n,o,s,l);a.forEach(e=>{e.querySelector("img").style.width=s+"px";e.querySelector("img").style.height=l+"px"})}});imageResize(".carousel-item");let o=document.querySelectorAll(".dropdown");if(o){o.forEach(e=>{e.onmouseover=(()=>e.querySelector(".dropdown-menu").classList.add("show"));e.onmouseout=(()=>e.querySelector(".dropdown-menu").classList.remove("show"))})}let s=n.querySelector(".menu-backdrop");if(!s){return}let l=document.body.clientWidth;let r=n.querySelector("#site-header");let i=document.querySelector("#navbar");let d=document.querySelector("#site-navigation");if(!d){return}let c=document.getElementById("trigger");if("undefined"===typeof c){return}let u=d.querySelector("ul");if(!u){c.style.display="none"}else{let e=u.querySelectorAll("a");let t=u.getElementsByClassName("dropdown-menu");for(let e=0,a=t.length;e<a;e++){t[e].parentNode.setAttribute("aria-haspopup","true")}e.forEach(e=>{if(!e.classList.contains("dropdown-toggle"))e.onclick=function(){n.classList.remove("nav-opened");d.classList.remove("toggled");s.classList.remove("show");a.classList.remove("noscroll")}})}if(l<992){s.style.top=i.style.top=parseFloat(document.defaultView.getComputedStyle(a,null).marginTop)+d.offsetHeight+"px"}c.addEventListener("click",e=>{e.preventDefault();if(-1!=d.className.indexOf("toggled")){c.setAttribute("aria-expanded","false");s.classList.remove("show");i.classList.remove("show");d.classList.remove("toggled");n.classList.remove("nav-opened");a.classList.remove("noscroll")}else{a.classList.add("noscroll");n.classList.add("nav-opened");d.classList.add("toggled");i.classList.add("show");s.classList.add("show");c.setAttribute("aria-expanded","true")}});let m=false;s.addEventListener("touchmove",()=>{m=true});s.addEventListener("touchend",e=>{e.preventDefault();if(false===m){if(-1!=s.className.indexOf("show")){d.classList.remove("toggled");c.setAttribute("aria-expanded","false");s.classList.remove("show");a.classList.remove("noscroll");n.classList.remove("nav-opened");i.classList.remove("show")}}});s.addEventListener("touchstart",function(){m=false});document.querySelectorAll("#wp-calendar tbody td a").forEach(e=>{e.classList.add("has-posts")});let f=new LazyLoad({elements_selector:".lazy",threshold:0});if(f){f.update()}if("undefined"!==typeof hljs){document.querySelectorAll("pre code").forEach(e=>{hljs.highlightBlock(e)})}let p=document.getElementById("scroll-up");p.addEventListener("click",e=>{e.preventDefault();animate({duration:700,timing:L,draw:e=>a.scrollTop=a.scrollTop*(1-e/7)})});window.addEventListener("scroll",h);function h(){pageYOffset>=500&&p.classList.add("show");pageYOffset<500&&p.classList.remove("show")}let y=e=>1-Math.sin(Math.acos(e>1?e=1:e));let g=e=>t=>1-e(1-t);let L=g(y);const v=document.querySelector(".more-posts");if(typeof v!="undefined"&&v!=null){v.addEventListener("click",e=>{e.preventDefault();v.innerHTML=adminajax.loading;let t=document.querySelector(".ajax-posts");let a=t.dataset.page;let n=t.dataset.max;let o=new URLSearchParams;o.append("action","load_more");o.append("security",adminajax.nonce);o.append("current_page",a);o.append("max_pages",n);fetch(adminajax.url,{method:"POST",body:o}).then(e=>e.json()).then(e=>{if(a==n){throw e}if(e.success==true){let a=parseToDOM(e.data);t.dataset.page++;a.forEach(e=>{document.querySelector(".ajax-posts").appendChild(e)})}v.innerHTML=adminajax.loadmore;v.blur()}).catch(e=>{v.innerHTML=adminajax.noposts;v.blur();v.setAttribute("disabled","true");v.setAttribute("aria-disabled","true")})})}let S=document.querySelector(".like-button");if(typeof S!="undefined"&&S!=null&&S.classList.contains("done")==false){let e=S.dataset.id;let t=new URLSearchParams;t.append("action","lerm_post_like");t.append("security",adminajax.nonce);t.append("post_ID",e);S.addEventListener("click",e=>{e.preventDefault();fetch(adminajax.url,{method:"POST",body:t}).then(e=>e.json()).then(e=>{S.classList.add("done");S.disabled=true;document.querySelector(".count").innerHTML=parseInt(e)}).catch(e=>console.log(e.message))})}let w=document.getElementById("commentform");if(w){w.insertAdjacentHTML("beforeend",'<div id="error" class="text-danger wow"></div>');let e=w.querySelector("#error");let t=w.querySelector('[name="author"]');let a=w.querySelector('[name="email"]');let n=w.querySelector('[name="url"]');let o=w.querySelector('[name="comment"]');e.style.visibility="hidden";e.innerHTML="#";w.addEventListener("submit",s=>{s.preventDefault();e.removeAttribute("style");e.classList.remove("shake");e.classList.remove("fadeOut");e.innerHTML='<strong><i class="fa fa-spinner fa-pulse 1"></i>正在提交...</strong>';(new WOW).init();if(!adminajax.loggedin){let o={author:t.value,email:a.value,url:n.value};if(!o.author){e.innerHTML="<strong>错误：</strong>请填写姓名";e.classList.add("shake");return}if(!validateEmail(o.email)){e.innerHTML="<strong>错误：</strong>请填写正确的电子邮箱";e.classList.add("shake");return}}if(!o.value){e.innerHTML="<strong>错误：</strong>请输入评论内容";e.classList.add("shake");return}let l=new URLSearchParams(new FormData(w));l.append("action","ajax_comment");l.append("security",adminajax.nonce);fetch(adminajax.url,{method:"POST",body:l}).then(e=>e.json()).then(e=>{let t=parseToDOM(e.data);if(e.success==true&&e.data.length!=0){w.querySelector('[type="submit"]').setAttribute("disabled","disabled");let e=document.getElementById("respond");if(e.parentNode.classList.contains("comment")){if(null!==e.previousElementSibling){t.forEach(t=>{e.previousElementSibling.appendChild(t)})}else{t.forEach(t=>{e.parentNode.appendChild(t)})}}else if(document.querySelector(".comment-list")){t.forEach(e=>{document.querySelector(".comment-list").insertBefore(e,document.querySelector(".comment-list").firstChild)})}else{t.forEach(t=>{e.parentNode.appendChild(t)})}}else{throw t}}).then(()=>{w.querySelector("#comment").value="";e.innerHTML='<strong><i class="fa fa-ok mr-1"></i>提交成功</strong>';let t=setTimeout(function(){w.querySelector('[type="submit"]').removeAttribute("disabled","disabled");e.classList.add("fadeOut");e.style.opacity=0;clearTimeout(t)},3e3)}).catch(t=>{e.innerHTML="<strong>错误：</strong>";t.forEach(t=>{e.appendChild(t);e.classList.add("shake");let a=setTimeout(function(){w.querySelector('[type="submit"]').removeAttribute("disabled","disabled");e.classList.add("fadeOut");e.style.opacity=0;clearTimeout(a)},3e3)})})})}});function isDomReady(e){if(typeof e!=="function"){return}if(document.readyState==="interactive"||document.readyState==="complete"){return e()}document.addEventListener("DOMContentLoaded",e,false)}isDomReady(function(){});const parseToDOM=function(e){let t=document.createElement("div");if(typeof e=="string")t.innerHTML=e;return Array.prototype.slice.call(t.childNodes)};const matches=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)};function fadeIn(e){e.style.opacity=0;var t=+new Date;var a=function(){e.style.opacity=+e.style.opacity+(new Date-t)/400;t=+new Date;if(+e.style.opacity<1){window.requestAnimationFrame&&requestAnimationFrame(a)||setTimeout(a,16)}};a()}const validateEmail=function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())};const animate=function(e){let t=performance.now();requestAnimationFrame(function a(n){let o=(n-t)/e.duration;o>1&&(o=1);let s=e.timing(o);e.draw(s);o<1&&requestAnimationFrame(a)})};